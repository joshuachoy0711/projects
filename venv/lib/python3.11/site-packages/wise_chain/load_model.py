# unused imports required for LLMRegistry to be populated
# these can't be imported in LLMRegistry itself due to circular imports
from typing import Optional

from wise_chain.embeddings.bedrock import BedrockEmbeddings  # noqa
from wise_chain.embeddings.openai import OpenAIEmbeddings  # noqa
from wise_chain.llm_registry import LLMRegistry  # noqa
from wise_chain.llms.ai21 import AI21  # noqa
from wise_chain.llms.ai21 import AI21_LLMS
from wise_chain.llms.anthropic import (  # noqa
    BEDROCK_CLAUDE_MODEL_ALIASES,
    CREDAL_CLAUDE_MODELS,
    AnthropicBedrock,
    AnthropicCredal,
)
from wise_chain.llms.bedrock import Bedrock  # noqa
from wise_chain.llms.bedrock import BEDROCK_LLMS
from wise_chain.llms.google import Google  # noqa
from wise_chain.llms.google import GOOGLE_LLMS
from wise_chain.llms.openai import OpenAI  # noqa
from wise_chain.llms.openai import OPENAI_LLMS


def load_model(
    model_id: str,
    team: str,
    use_case: str,
    timeout: int = 30,
    service_or_user: str = 'user',
    ml_prod: bool = False,
    base_uri: Optional[str] = None,
):
    model_class = LLMRegistry.get(model_id)
    return model_class(
        model_id=model_id,
        team=team,
        use_case=use_case,
        timeout=timeout,
        service_or_user=service_or_user,
        ml_prod=ml_prod,
        base_uri=base_uri,
    )


def list_available_models() -> dict[str, list[str]]:
    return {
        'openai': OPENAI_LLMS,
        'anthropic-bedrock-aliases': list(BEDROCK_CLAUDE_MODEL_ALIASES.keys()),
        'anthropic-bedrock': list(BEDROCK_CLAUDE_MODEL_ALIASES.values()),
        'anthropic-credal': CREDAL_CLAUDE_MODELS,
        'google': GOOGLE_LLMS,
        'ai21': AI21_LLMS,
        'amazon': BEDROCK_LLMS,
    }
