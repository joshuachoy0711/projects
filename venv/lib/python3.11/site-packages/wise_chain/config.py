import os
from enum import Enum


class Env(Enum):
    LOCAL = 'local'
    SAGEMAKER = 'sagemaker'
    PROD = 'prod'
    STAGING = 'staging'
    TEST = 'test'

    @classmethod
    def infer(cls) -> 'Env':
        """Infer the environment based on environment variables."""
        # Default to local
        env = cls.LOCAL

        # Try service env
        if 'SERVICE_ENVIRONMENT' in os.environ:
            service_env = os.environ['SERVICE_ENVIRONMENT'].lower()

            if service_env == 'production':
                return cls.PROD

            elif service_env == 'staging':
                return cls.STAGING

            elif service_env == 'test':
                return cls.TEST

        return env
